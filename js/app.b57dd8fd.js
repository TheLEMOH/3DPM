(function(t){function e(e){for(var r,o,u=e[0],c=e[1],s=e[2],p=0,f=[];p<u.length;p++)o=u[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(f.length)f.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,u=1;u<n.length;u++){var c=n[u];0!==a[c]&&(r=!1)}r&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},a={app:0},i=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="./";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=e,u=u.slice();for(var s=0;s<u.length;s++)e(u[s]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t._v(" "+t._s(t.text)+" "),n("Settings",{on:{ref:t.Refresh}}),t.load?n("Topo",{attrs:{data:t.data3D}}):t._e()],1)},i=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Plotly",{attrs:{data:t.data,layout:t.layout,config:t.config,"display-mode-bar":!1}})},u=[],c=n("04d1"),s={components:{Plotly:c["Plotly"]},props:["data"],data:function(){return{config:{responsive:!0},layout:{width:1e3,height:700,margin:{l:50,r:50,b:100,t:0,pad:4}}}}},l=s,p=n("2877"),f=Object(p["a"])(l,o,u,!1,null,null,null),h=f.exports,d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"datapicker"},[n("p",[n("span",{staticClass:"block"},[t._v("Дата")]),n("date-picker",{staticClass:"block",attrs:{range:"",valueType:"format"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),n("p",[n("span",{staticClass:"block"},[t._v("Агрегирование")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.interval,expression:"interval"}],staticClass:"block",staticStyle:{height:"34px","font-size":"14px"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.interval=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"1hour"}},[t._v("Час")]),n("option",{attrs:{value:"6hour"}},[t._v("6 часов")]),n("option",{attrs:{value:"12hour"}},[t._v("12 часов")]),n("option",{attrs:{value:"1day"}},[t._v("День")])])]),n("button",{staticStyle:{height:"34px"},on:{click:t.Refresh}},[t._v("Обновить")])])},v=[],m=n("ec45"),g=(n("411c"),{components:{DatePicker:m["a"]},data:function(){return{time:["2019-06-01","2019-08-31"],interval:"6hour"}},methods:{Refresh:function(){this.$emit("ref",this.time,this.interval)}}}),b=g,y=(n("ef23"),Object(p["a"])(b,d,v,!1,null,null,null)),_=y.exports,x=n("1da1");n("96cf"),n("99af"),n("d3b7"),n("159b"),n("b680"),n("a9e3");function w(t,e){return k.apply(this,arguments)}function k(){return k=Object(x["a"])(regeneratorRuntime.mark((function t(e,n){var r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="https://gis.krasn.ru/sc/api/1.0/projects/9/aggvalues?&sites=3837&key=654hblgm9gl8367h&time_begin=".concat(e[0]," 00:00:00&time_end=").concat(e[1]," 00:00:00&time_interval=").concat(n,"&indicators=348&limit=30000'"),a=fetch(r),i=a.then((function(t){return R(t)})),t.abrupt("return",i);case 4:case"end":return t.stop()}}),t)}))),k.apply(this,arguments)}function O(t,e){return j.apply(this,arguments)}function j(){return j=Object(x["a"])(regeneratorRuntime.mark((function t(e,n){var r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="https://gis.krasn.ru/sc/api/1.0/projects/1/aggvalues?&sites=3833&key=654hblgm9gl8367h&time_begin=".concat(e[0]," 00:00:00&time_end=").concat(e[1]," 00:00:00&time_interval=").concat(n,"&indicators=101&limit=30000'"),a=fetch(r),i=a.then((function(t){return R(t)})),t.abrupt("return",i);case 4:case"end":return t.stop()}}),t)}))),j.apply(this,arguments)}function P(t){return t>=0&&t<11.25?"С":t>=11.25&&t<33.75?"ССВ":t>=33.75&&t<56.25?"СВ":t>=56.25&&t<78.75?"ВСВ":t>=78.75&&t<101.25?"В":t>=101.25&&t<123.75?"ВЮВ":t>=123.75&&t<146.25?"ЮВ":t>=146.25&&t<168.75?"ЮЮВ":t>=168.75&&t<191.25?"Ю":t>=191.25&&t<213.75?"ЮЮЗ":t>=213.75&&t<236.25?"ЮЗ":t>=236.25&&t<258.75?"ЗЮЗ":t>=258.75&&t<281.25?"З":t>=281.25&&t<303.75?"ЗСЗ":t>=303.75&&t<326.25?"СЗ":t>=326.25&&t<348.75?"ССЗ":t>=348.75?"С":void 0}function R(t){return S.apply(this,arguments)}function S(){return S=Object(x["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.text().then((function(t){var e=[],n=[],r=new DOMParser,a=r.parseFromString(t,"text/xml"),i=a.getElementsByTagName("aggvalue");return i.forEach((function(t){var r=t.getAttribute("indicator"),a=t.getAttribute("time").substring(0,t.getAttribute("time").length-3),i=Number(t.getElementsByTagName("avg")[0].innerHTML).toFixed(4);101==r?e.push(P(i)):e.push(1e3*i),n.push(a)})),{result:e,times:n}})),t.abrupt("return",n);case 2:case"end":return t.stop()}}),t)}))),S.apply(this,arguments)}var T={name:"App",data:function(){return{data3D:"",data2D:"",load:!1,text:""}},components:{Settings:_,Topo:h},methods:{Refresh:function(t,e){var n=this;this.text="ЗАГРУЗКА...",w(t,e).then((function(r){O(t,e).then((function(t){n.data3D=[{opacity:1,color:"rgb(100,100,200)",type:"mesh3d",x:t.result,y:r.times,z:r.result}],n.text="ГОТОВО",n.load=!0}))}))}},mounted:function(){this.Refresh(["2019-06-01","2019-08-31"],"6hour")}},D=T,E=Object(p["a"])(D,a,i,!1,null,null,null),M=E.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(M)}}).$mount("#app")},c967:function(t,e,n){},ef23:function(t,e,n){"use strict";n("c967")}});
//# sourceMappingURL=app.b57dd8fd.js.map